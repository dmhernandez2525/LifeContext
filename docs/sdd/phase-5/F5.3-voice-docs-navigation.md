# F5.3 Voice-Docs Navigation SDD

## Metadata
- Feature: F5.3 Voice-Docs Navigation
- Phase: 5
- Status: In Progress
- Owner: Web App
- Updated: 2026-02-16

## Goals
- Support natural language navigation commands (for example: "take me to journal").
- Surface contextual help suggestions based on current section and breadcrumbs.
- Add guided walkthrough overlays with step-by-step spotlights.
- Add deep-link search command handling to jump to matching settings and entries.
- Add keyboard shortcut access for help modal (`Ctrl+/` and `Cmd+/`).
- Add a command palette for power navigation with fuzzy filtering.
- Add breadcrumb-aware context labels in the help panel.
- Add quick "show me how" actions for common flows.
- Add persistent help history for replaying previous interactions.
- Add feature discovery prompts by section to guide first-time use.

## Constraints
- Keep new modules split into focused files under `components/help/`.
- No file exceeds 300 lines.
- No forbidden patterns (`any`, `@ts-ignore`, `eslint-disable`, `console.*`).
- Do not bypass encryption/privacy boundaries in deep-link behavior.

## UX Flow
1. User opens Ask Docs from floating button or `Ctrl+/` / `Cmd+/`.
2. Modal shows current context from breadcrumbs.
3. User can:
   - enter a natural language command,
   - click suggested prompts,
   - start a quick walkthrough,
   - open command palette,
   - reuse history.
4. Commands route to:
   - navigation target,
   - walkthrough overlay,
   - deep-link search result,
   - backend assistant response fallback.

## Architecture
- `AskDocsButton.tsx`
  - Orchestrates command parsing, routing, modal state, discovery prompts, and history.
- `helpNavigation.ts`
  - Command parsing, breadcrumbs, target scoring, contextual suggestions.
- `helpWalkthroughs.ts`
  - Walkthrough catalog and query-to-walkthrough matching.
- `HelpWalkthroughOverlay.tsx`
  - Spotlight overlay and next/back/done progression.
- `helpDeepLink.ts`
  - Search command resolver for settings, journal, and question deep links.
- `HelpCommandPalette.tsx`
  - Fuzzy navigation palette.
- `helpHistory.ts` + `HelpHistoryPanel.tsx`
  - Local history persistence and replay UI.

## Storage Keys
- `lcc-help-history`
- `lcc-help-discovery-seen-<section>`

## Testing Plan
- E2E: command parsing routes to expected section.
- E2E: contextual suggestions show section-relevant prompts.
- E2E: walkthrough overlay progresses step-by-step.
- E2E: deep-link search command routes to expected target.
- E2E: keyboard shortcut opens Ask Docs modal.

## Rollout Notes
- Works on public pages and authenticated app sections.
- Gracefully falls back when backend response endpoint is unavailable.
