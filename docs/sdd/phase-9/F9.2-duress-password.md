# F9.2 Duress Password - SDD

## Overview
Added a duress/panic password feature that shows benign decoy data when entered under coercion, protecting real encrypted entries from forced access.

## Files Created

### `apps/web/src/lib/duressMode.ts`
- `isDuressActive()` - Checks sessionStorage for active duress mode
- `activateDuress()` / `deactivateDuress()` - Session-scoped duress state management
- `DECOY_JOURNAL_ENTRIES` - 3 harmless journal entries (grocery list, weekend plans, book recs)
- `DECOY_STATS` - Benign dashboard statistics
- `DECOY_BRAIN_DUMPS` - 1 innocuous brain dump entry
- Uses sessionStorage so duress state clears on tab close

### `apps/web/src/components/security/DuressSetup.tsx`
- Setup form with password + confirmation inputs
- Validates minimum length (6 chars) and ensures different from real passcode
- Uses same salt as real passcode for consistent hashing
- Shows active/inactive status indicator
- Change and disable options when configured

## Files Modified

### `apps/web/src/components/security/LockScreen.tsx`
- Integrated duress password check before real passcode comparison
- On duress match: activates duress mode via sessionStorage, then unlocks
- On real passcode match: explicitly deactivates duress mode, then unlocks
- Duress unlock is indistinguishable from real unlock in UI behavior

## Architecture Decisions
- Duress hash stored in security-store (Zustand + localStorage)
- Duress active state uses sessionStorage (not localStorage) so it resets on browser close
- Same salt used for both real and duress password hashing to prevent detection via timing
- Duress mode check happens before real passcode check in the unlock flow
- Decoy data is static and innocuous to appear realistic under scrutiny
- No visual indicator of duress mode anywhere in the app (by design)
