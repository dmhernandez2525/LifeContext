# F7.3 Voting System SDD

## Metadata
- Feature: F7.3 Voting System
- Phase: 7
- Status: Complete
- Owner: Web App
- Updated: 2026-02-16

## Goals
- Add multi-mode sorting (hot, trending, top, newest, controversial).
- Add trending velocity algorithm based on vote rate per day.
- Add "hot" score combining vote ratio, volume, and recency with gravity decay.
- Add vote analytics dashboard with approval rate, category breakdown, and totals.
- Add leaderboard showing top voted and trending features.

## Architecture

### Feature Scoring (`src/lib/featureScoring.ts`)
- `calculateHotScore()` - Wilson-inspired score: net votes * recency boost * volume factor
- `calculateTrendingVelocity()` - Votes per day over the most recent 7-day window
- `sortFeatures()` - Sort by hot, trending, top, newest, or controversial mode
- `calculateVoteAnalytics()` - Aggregate stats: total votes, approval rate, category breakdown
- Controversial = high total votes with close to 50/50 split, weighted by volume

### VoteLeaderboard (`src/components/features/VoteLeaderboard.tsx`)
- Analytics summary cards: Total Votes, Features, Approval Rate, Categories
- Top Voted section with rank badges (gold #1, silver #2, bronze #3)
- Trending section showing vote velocity per day
- Category breakdown with vote counts per category

### FeatureRequestPage Updates
- Sort selector with 5 modes: Hot, Trending, Top, Newest, Controversial
- Stats toggle button to show/hide VoteLeaderboard
- Features sorted by selected mode before display

## Testing Plan
- Unit: calculateHotScore gives higher scores to recent features with many votes
- Unit: calculateTrendingVelocity returns votes/day correctly
- Unit: sortFeatures correctly orders by each mode
- Unit: calculateVoteAnalytics computes approval rate and category breakdown
- Integration: Sort selector changes feature order in the list
- Integration: VoteLeaderboard displays correct top 5 and trending 5
