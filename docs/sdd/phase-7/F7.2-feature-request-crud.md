# F7.2 Feature Request CRUD SDD

## Metadata
- Feature: F7.2 Feature Request CRUD
- Phase: 7
- Status: Complete
- Owner: Web App
- Updated: 2026-02-16

## Goals
- Refactor monolithic FeatureRequestPage into modular components.
- Add feature detail view with full description, voting, and comment thread.
- Add submit modal with duplicate detection suggesting similar existing requests.
- Add full-text search across feature titles and descriptions.
- Add comment system with author name and admin badge support.

## Architecture

### FeatureCard (`src/components/features/FeatureCard.tsx`)
- Displays feature title, description (line-clamped), category, status badge, and vote buttons
- Status config lookup table: pending, planned, in_progress, completed with icons and colors
- Clickable content area opens detail modal
- Vote buttons with active/inactive styling

### SubmitFeatureModal (`src/components/features/SubmitFeatureModal.tsx`)
- Form with title (120 char max), description (2000 char max), category select, optional email
- Duplicate detection: shows warning when title matches existing requests (3+ chars)
- Character count display for description
- Calls onSubmit callback to create feature via hook

### FeatureDetailModal (`src/components/features/FeatureDetailModal.tsx`)
- Full feature view with description, status badge, voting section, and comment thread
- Comment form with optional author name and content input
- Admin comments highlighted with purple border and "(Team)" badge
- Scrollable content area with fixed header and comment form footer

### Refactored FeatureRequestPage (`src/pages/FeatureRequestPage.tsx`)
- Reduced from 417 to 182 lines using extracted components
- Added search bar with icon for filtering by title/description
- Added results count display
- Uses useLocalFeatureRequests hook for data management
- Local comment state stored in page-level Record

## Testing Plan
- Unit: FeatureCard renders status badge and vote buttons correctly
- Unit: SubmitFeatureModal shows duplicate warnings for matching titles
- Unit: FeatureDetailModal displays comments and handles form submission
- Integration: Search filters features by title and description
- Integration: Comment addition persists in local state
- Integration: Vote toggle updates feature counts correctly
